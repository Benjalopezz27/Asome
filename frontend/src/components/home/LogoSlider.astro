---
const { title, logos } = Astro.props;
const STRAPI_URL = import.meta.env.STRAPI_URL || "http://localhost:1337";
export const getImageUrl = (url: string | undefined) => {
  if (!url) return "";

  if (url.startsWith("http")) {
    return url;
  }

  return `${STRAPI_URL}${url}`;
};
const infiniteLogos = [...logos, ...logos];
---

<section
  class="w-full py-12 bg-[#F9FAFB] border-t border-b border-gray-100 overflow-hidden"
>
  <div
    class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-8 md:gap-0"
  >
    <div
      class="w-full md:w-1/4 flex items-center justify-center md:justify-start relative z-10 bg-[#F9FAFB]"
    >
      <div class="flex items-center gap-6">
        <h3
          class="dark-blue font-bold text-2xl leading-tight text-center md:text-right max-w-50"
        >
          {title}
        </h3>
        <div class="hidden md:block w-0.5 h-16 bg-dark-blue"></div>
      </div>
    </div>
    <div class="w-full md:w-3/4 relative overflow-hidden mask-gradient">
      <div class="flex items-center gap-16 animate-infinite-scroll w-max">
        {
          infiniteLogos.map((logo, index) => (
            <div class="relative w-32 h-16 flex items-center justify-center grayscale hover:grayscale-0 transition-all duration-300 opacity-60 hover:opacity-100">
              <img
                src={getImageUrl(logo.image.url)}
                alt={logo.name}
                class="max-w-full max-h-full object-contain"
                loading={index < 5 ? "eager" : "lazy"}
              />
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .animate-infinite-scroll {
    animation: scroll 30s linear infinite;
  }

  .animate-infinite-scroll:hover {
    animation-play-state: paused;
  }

  .mask-gradient {
    mask-image: linear-gradient(
      to right,
      transparent,
      black 10%,
      black 90%,
      transparent
    );
    -webkit-mask-image: linear-gradient(
      to right,
      transparent,
      black 10%,
      black 90%,
      transparent
    );
  }
</style>
