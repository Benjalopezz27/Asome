---
import { getImageUrl } from "@/lib/globalData";

const { title, logos } = Astro.props;

const infiniteLogos = [...logos, ...logos, ...logos, ...logos];
---

<section
  class="w-full py-12 bg-[#F9FAFB] border-t border-b border-gray-100 overflow-hidden"
>
  <div
    class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center gap-8 md:gap-0"
  >
    <div
      class="w-full md:w-1/4 flex items-center justify-center md:justify-start relative z-10 bg-[#F9FAFB]"
    >
      <div class="flex items-center gap-6">
        <h4
          class="dark-blue font-bold text-2xl leading-tight text-center md:text-right max-w-50"
        >
          {title}
        </h4>
        <div class="hidden md:block w-0.5 h-16 bg-dark-blue"></div>
      </div>
    </div>

    <div class="w-full md:w-3/4 relative overflow-hidden mask-gradient">
      <div class="flex items-center gap-16 animate-infinite-scroll w-max">
        {
          infiniteLogos.map((logo, index) => (
            <div class="relative w-40 h-20 md:w-48 md:h-24 shrink-0 flex items-center justify-center grayscale hover:grayscale-0 transition-all duration-300 opacity-60 hover:opacity-100 cursor-pointer">
              <img
                src={getImageUrl(logo.image.url)}
                alt={logo.name}
                class="max-w-full max-h-full object-contain"
                loading={index < 5 ? "eager" : "lazy"}
              />
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-25%);
    }
  }

  .animate-infinite-scroll {
    animation: scroll 20s linear infinite;
    will-change: transform;
  }

  .animate-infinite-scroll:hover {
    animation-play-state: paused;
  }

  .mask-gradient {
    mask-image: linear-gradient(
      to right,
      transparent,
      black 5%,
      black 95%,
      transparent
    );
    -webkit-mask-image: linear-gradient(
      to right,
      transparent,
      black 5%,
      black 95%,
      transparent
    );
  }
</style>
